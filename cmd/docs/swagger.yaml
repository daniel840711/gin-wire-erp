basePath: /
definitions:
  interchange_internal_core.ApiScope:
    enum:
    - /chat/completions
    - /images/generations
    - /images/variations
    - /images/edits
    - /audio/transcriptions
    - /embeddings
    - /models
    - /mcp-server/*
    - '*'
    type: string
    x-enum-varnames:
    - ApiScopeChatCompletions
    - ApiScopeImagesGenerations
    - ApiScopeImagesVariations
    - ApiScopeImagesEdits
    - ApiScopeAudioTranscriptions
    - ApiScopeEmbeddingsGenerations
    - ApiScopeGetModels
    - ApiScopeMCPServer
    - ApiScopeAll
  interchange_internal_core.LimitPeriod:
    enum:
    - daily
    - weekly
    - monthly
    - yearly
    - none
    type: string
    x-enum-varnames:
    - LimitPeriodDaily
    - LimitPeriodWeekly
    - LimitPeriodMonthly
    - LimitPeriodYearly
    - LimitPeriodNone
  interchange_internal_core.ProviderName:
    enum:
    - openai
    - gemini
    - grok
    - custom
    type: string
    x-enum-varnames:
    - ProviderOpenAI
    - ProviderGemini
    - ProviderGrok
    - ProviderCustom
  interchange_internal_core.Role:
    enum:
    - admin
    - editor
    - user
    - readonly
    - banned
    type: string
    x-enum-comments:
      RoleAdmin: 管理員：可編輯所有人
      RoleBanned: 被禁用，無法登入或操作
      RoleEditor: 可編輯內容，但不能做高權限操作
      RoleReadOnly: 只能查詢，不能改資料
      RoleUser: 一般使用者
    x-enum-varnames:
    - RoleAdmin
    - RoleEditor
    - RoleUser
    - RoleReadOnly
    - RoleBanned
  interchange_internal_core.Status:
    enum:
    - active
    - blocked
    - suspended
    - expired
    - revoked
    - maintenance
    - pending
    - deleted
    type: string
    x-enum-comments:
      StatusActive: 正常可用
      StatusBlocked: 被封鎖（例如濫用）
      StatusDeleted: 已刪除（軟刪除）
      StatusExpired: 已過期
      StatusMaintenance: 系統維護中（暫時停用）
      StatusPending: 尚未啟用（等待審核/激活）
      StatusRevoked: 被手動撤銷
      StatusSuspended: 暫停（違規調查中）
    x-enum-varnames:
    - StatusActive
    - StatusBlocked
    - StatusSuspended
    - StatusExpired
    - StatusRevoked
    - StatusMaintenance
    - StatusPending
    - StatusDeleted
  interchange_internal_dto.CreateUserAPIKeyDto:
    properties:
      keyName:
        type: string
      keyValue:
        type: string
      providerAccess:
        items:
          $ref: '#/definitions/interchange_internal_dto.ProviderAccessDto'
        type: array
    required:
    - keyName
    - providerAccess
    type: object
  interchange_internal_dto.CreateUserDto:
    properties:
      displayName:
        description: 顯示名稱
        type: string
      email:
        description: 信箱可選且格式驗證
        type: string
      externalID:
        description: 外部平台 ID（如 Google/Lark）
        type: string
      lang:
        description: 語系（如 zh-TW, en）
        type: string
      role:
        allOf:
        - $ref: '#/definitions/interchange_internal_core.Role'
        description: 角色
      status:
        allOf:
        - $ref: '#/definitions/interchange_internal_core.Status'
        description: 狀態
    required:
    - displayName
    - role
    - status
    type: object
  interchange_internal_dto.ProviderAccessDto:
    properties:
      apiScopes:
        description: 可選，API 權限範圍
        items:
          $ref: '#/definitions/interchange_internal_core.ApiScope'
        type: array
      expireTime:
        description: API Key 過期時間
        type: string
      lastResetAt:
        description: 最後重置時間
        type: string
      lastSeen:
        description: 最後使用時間
        type: string
      limitCount:
        description: 限制次數
        type: integer
      limitPeriod:
        allOf:
        - $ref: '#/definitions/interchange_internal_core.LimitPeriod'
        description: daily, weekly, monthly...
      provider:
        allOf:
        - $ref: '#/definitions/interchange_internal_core.ProviderName'
        description: openai, gemini...
      providerKey:
        description: 可選，對應 Provider 的 API Key
        type: string
      status:
        allOf:
        - $ref: '#/definitions/interchange_internal_core.Status'
        description: active, blocked...
      usedCount:
        description: 已使用次數
        type: integer
    required:
    - provider
    - status
    type: object
  interchange_internal_dto.UpdateProviderAccessAllDto:
    properties:
      providerAccess:
        items:
          $ref: '#/definitions/interchange_internal_dto.ProviderAccessDto'
        type: array
    required:
    - providerAccess
    type: object
  interchange_internal_dto.UpdateUserDto:
    properties:
      displayName:
        type: string
      email:
        type: string
      externalID:
        type: string
      lang:
        type: string
      role:
        $ref: '#/definitions/interchange_internal_core.Role'
      status:
        $ref: '#/definitions/interchange_internal_core.Status'
    type: object
  interchange_internal_dto.UpdateUserRoleDto:
    properties:
      role:
        $ref: '#/definitions/interchange_internal_core.Role'
    required:
    - role
    type: object
  interchange_internal_dto.UpdateUserStatusDto:
    properties:
      status:
        $ref: '#/definitions/interchange_internal_core.Status'
    required:
    - status
    type: object
  interchange_internal_dto.UserAPIKeyResponseDto:
    properties:
      createdAt:
        type: string
      id:
        type: string
      keyName:
        type: string
      keyValue:
        type: string
      providerAccess:
        items:
          $ref: '#/definitions/interchange_internal_dto.ProviderAccessDto'
        type: array
      updatedAt:
        type: string
      userId:
        type: string
    type: object
  interchange_internal_dto.UserResponseDto:
    properties:
      created_at:
        type: string
      displayName:
        type: string
      email:
        type: string
      externalID:
        type: string
      id:
        type: string
      lang:
        type: string
      last_seen:
        type: string
      role:
        $ref: '#/definitions/interchange_internal_core.Role'
      status:
        $ref: '#/definitions/interchange_internal_core.Status'
      updatedAt:
        type: string
    type: object
  interchange_internal_pkg_error.Error:
    type: object
  interchange_internal_pkg_response.Response:
    properties:
      code:
        type: integer
      data: {}
      description:
        type: string
      message:
        type: string
      requestID:
        type: string
    type: object
  interchange_internal_service_audio.AudioSpeechRequestBody:
    properties:
      input:
        type: string
      instructions:
        type: string
      model:
        type: string
      response_format:
        description: mp3, wav, etc.
        type: string
      speed:
        description: 0.25 - 4.0
        type: number
      stream_format:
        description: audio or sse
        type: string
      voice:
        type: string
    required:
    - input
    - model
    - voice
    type: object
  interchange_internal_service_audio.AudioTranscriptionRequestBody:
    properties:
      chunking_strategy:
        description: '"auto" or blank'
        type: string
      file:
        $ref: '#/definitions/multipart.FileHeader'
      include:
        description: optional logprobs
        items:
          type: string
        type: array
      language:
        description: ISO-639-1 e.g. "en"
        type: string
      model:
        description: whisper-1, gpt-4o-transcribe, etc.
        type: string
      prompt:
        type: string
      response_format:
        description: json, text, srt, etc.
        type: string
      stream:
        description: gpt-4o only
        type: boolean
      temperature:
        type: number
      timestamp_granularities:
        items:
          type: string
        type: array
    required:
    - file
    - model
    type: object
  interchange_internal_service_audio.AudioTranslationRequestBody:
    properties:
      file:
        allOf:
        - $ref: '#/definitions/multipart.FileHeader'
        description: 使用 multipart/form-data 上傳檔案
      model:
        description: 'ex: whisper-1'
        type: string
      prompt:
        type: string
      response_format:
        description: json, text, srt, verbose_json, vtt
        type: string
      temperature:
        description: 0 ~ 1
        type: number
    required:
    - file
    - model
    type: object
  interchange_internal_service_chat.ChatChoice:
    properties:
      extensions:
        additionalProperties: true
        description: 可再擴充：如 Gemini 會有自家 output/ext，可加 Extensions
        type: object
      finish_reason:
        type: string
      index:
        type: integer
      logprobs: {}
      message:
        $ref: '#/definitions/interchange_internal_service_chat.ChatResponseMessage'
    type: object
  interchange_internal_service_chat.ChatMessage:
    properties:
      content:
        description: string (text)、map（image/audio等）、支援多模態
      extensions:
        additionalProperties: true
        type: object
      function_call:
        description: 可存 openai function call
      name:
        description: optional
        type: string
      role:
        description: '"system"/"user"/"assistant"/...'
        type: string
      tool_calls:
        description: 工具調用紀錄
    type: object
  interchange_internal_service_chat.ChatPayload:
    properties:
      audio:
        additionalProperties: true
        description: 支援 audio output
        type: object
      extensions:
        additionalProperties: true
        description: 'Custom platform extension:'
        type: object
      frequency_penalty:
        type: number
      function_call:
        description: Deprecated (string or object)
      functions:
        description: Deprecated (array)
      logit_bias:
        additionalProperties:
          type: number
        description: 'token id(string): bias'
        type: object
      logprobs:
        type: boolean
      max_completion_tokens:
        type: integer
      messages:
        items:
          $ref: '#/definitions/interchange_internal_service_chat.ChatMessage'
        type: array
      metadata:
        additionalProperties:
          type: string
        type: object
      modalities:
        description: e.g. ["text", "audio"]
        items:
          type: string
        type: array
      model:
        type: string
      "n":
        type: integer
      parallel_tool_calls:
        type: boolean
      prediction:
        additionalProperties: true
        type: object
      presence_penalty:
        type: number
      prompt_cache_key:
        type: string
      reasoning_effort:
        description: '"low"/"medium"/"high"'
        type: string
      response_format:
        additionalProperties: true
        description: e.g. {type:json_schema}
        type: object
      safety_identifier:
        type: string
      seed:
        type: integer
      service_tier:
        description: '"auto"/"default"/...'
        type: string
      stop:
        description: string or []string or null
      store:
        type: boolean
      stream:
        type: boolean
      stream_options:
        additionalProperties: true
        type: object
      temperature:
        type: number
      tool_choice:
        description: string or object
      tools:
        description: array (function/tool desc)
      top_logprobs:
        type: integer
      top_p:
        type: number
      user:
        description: Deprecated, for compat
        type: string
      web_search_options:
        additionalProperties: true
        type: object
    type: object
  interchange_internal_service_chat.ChatResponseMessage:
    properties:
      annotations:
        items: {}
        type: array
      content: {}
      extensions:
        additionalProperties: true
        description: 支援未來擴充（如 Gemini 多模態等）
        type: object
      refusal: {}
      role:
        type: string
    type: object
  interchange_internal_service_chat.ChatResult:
    properties:
      choices:
        items:
          $ref: '#/definitions/interchange_internal_service_chat.ChatChoice'
        type: array
      created:
        type: integer
      extensions:
        additionalProperties: true
        description: 供其他平台或自家加欄位
        type: object
      id:
        type: string
      model:
        type: string
      object:
        type: string
      service_tier:
        type: string
      system_fingerprint:
        type: string
      usage:
        $ref: '#/definitions/interchange_internal_service_chat.ChatUsage'
    type: object
  interchange_internal_service_chat.ChatUsage:
    properties:
      completion_tokens:
        type: integer
      completion_tokens_details:
        additionalProperties: true
        type: object
      extensions:
        additionalProperties: true
        type: object
      prompt_tokens:
        type: integer
      prompt_tokens_details:
        additionalProperties: true
        type: object
      total_tokens:
        type: integer
    type: object
  interchange_internal_service_embedding.EmbeddingRequestBody:
    properties:
      dimensions:
        description: optional
        type: integer
      encoding_format:
        description: 'optional: "float" or "base64"'
        type: string
      input:
        description: string or []string or [][]int
      model:
        description: required
        type: string
      user:
        description: optional
        type: string
    type: object
  interchange_internal_service_embedding.EmbeddingResponse:
    properties:
      data:
        items:
          properties:
            embedding:
              description: e.g. 1536 floats for ada-002
              items:
                type: number
              type: array
            index:
              type: integer
            object:
              type: string
          type: object
        type: array
      model:
        type: string
      object:
        type: string
      usage:
        properties:
          prompt_tokens:
            type: integer
          total_tokens:
            type: integer
        type: object
    type: object
  interchange_internal_service_images.ImageEditRequestBody:
    properties:
      background:
        type: string
      image:
        items:
          $ref: '#/definitions/multipart.FileHeader'
        type: array
      mask:
        $ref: '#/definitions/multipart.FileHeader'
      model:
        $ref: '#/definitions/interchange_internal_service_images.ImageModel'
      "n":
        type: integer
      output_compression:
        type: integer
      output_format:
        $ref: '#/definitions/interchange_internal_service_images.ImageOutputFormat'
      prompt:
        type: string
      quality:
        $ref: '#/definitions/interchange_internal_service_images.ImageQuality'
      response_format:
        $ref: '#/definitions/interchange_internal_service_images.ImageResponseFormat'
      size:
        $ref: '#/definitions/interchange_internal_service_images.ImageSize'
      user:
        type: string
    required:
    - image
    - model
    - prompt
    type: object
  interchange_internal_service_images.ImageGenerationData:
    properties:
      b64_json:
        description: base64-encoded image
        type: string
      revised_prompt:
        description: dall-e-3 only
        type: string
      url:
        description: url for images (dall-e-2, dall-e-3)
        type: string
    type: object
  interchange_internal_service_images.ImageGenerationInputTokensDetail:
    properties:
      image_tokens:
        type: integer
      text_tokens:
        type: integer
    type: object
  interchange_internal_service_images.ImageGenerationRequestBody:
    properties:
      model:
        $ref: '#/definitions/interchange_internal_service_images.ImageModel'
      "n":
        type: integer
      prompt:
        type: string
      quality:
        $ref: '#/definitions/interchange_internal_service_images.ImageQuality'
      response_format:
        $ref: '#/definitions/interchange_internal_service_images.ImageResponseFormat'
      size:
        $ref: '#/definitions/interchange_internal_service_images.ImageSize'
      style:
        $ref: '#/definitions/interchange_internal_service_images.ImageStyle'
    type: object
  interchange_internal_service_images.ImageGenerationResponse:
    properties:
      background:
        description: '"transparent" | "opaque"'
        type: string
      created:
        description: unix timestamp (秒)
        type: integer
      data:
        description: 圖片列表
        items:
          $ref: '#/definitions/interchange_internal_service_images.ImageGenerationData'
        type: array
      output_format:
        allOf:
        - $ref: '#/definitions/interchange_internal_service_images.ImageOutputFormat'
        description: '"png", "jpeg", "webp"'
      quality:
        allOf:
        - $ref: '#/definitions/interchange_internal_service_images.ImageQuality'
        description: '"low", "medium", "high"'
      size:
        allOf:
        - $ref: '#/definitions/interchange_internal_service_images.ImageSize'
        description: '"1024x1024"...'
      usage:
        allOf:
        - $ref: '#/definitions/interchange_internal_service_images.ImageGenerationUsage'
        description: token usage info (GPT-Image-1 only)
    type: object
  interchange_internal_service_images.ImageGenerationUsage:
    properties:
      input_tokens:
        type: integer
      input_tokens_details:
        $ref: '#/definitions/interchange_internal_service_images.ImageGenerationInputTokensDetail'
      output_tokens:
        type: integer
      total_tokens:
        type: integer
    type: object
  interchange_internal_service_images.ImageModel:
    enum:
    - dall-e-2
    - dall-e-3
    - gpt-image-1
    type: string
    x-enum-varnames:
    - ImageModelDallE2
    - ImageModelDallE3
    - ImageModelGptImage1
  interchange_internal_service_images.ImageOutputFormat:
    enum:
    - png
    - jpeg
    - webp
    type: string
    x-enum-varnames:
    - ImageOutputPNG
    - ImageOutputJPEG
    - ImageOutputWebP
  interchange_internal_service_images.ImageQuality:
    enum:
    - auto
    - high
    - medium
    - low
    - hd
    - standard
    type: string
    x-enum-varnames:
    - ImageQualityAuto
    - ImageQualityHigh
    - ImageQualityMedium
    - ImageQualityLow
    - ImageQualityHD
    - ImageQualityStandard
  interchange_internal_service_images.ImageResponseFormat:
    enum:
    - url
    - b64_json
    type: string
    x-enum-varnames:
    - ImageResponseURL
    - ImageResponseB64Json
  interchange_internal_service_images.ImageSize:
    enum:
    - 256x256
    - 512x512
    - 1024x1024
    - 1536x1024
    - 1024x1536
    - 1792x1024
    - 1024x1792
    - auto
    type: string
    x-enum-varnames:
    - ImageSize256
    - ImageSize512
    - ImageSize1024
    - ImageSize1536x1024
    - ImageSize1024x1536
    - ImageSize1792x1024
    - ImageSize1024x1792
    - ImageSizeAuto
  interchange_internal_service_images.ImageStyle:
    enum:
    - vivid
    - natural
    type: string
    x-enum-varnames:
    - ImageStyleVivid
    - ImageStyleNatural
  interchange_internal_service_images.ImageVariantRequestBody:
    properties:
      image:
        $ref: '#/definitions/multipart.FileHeader'
      model:
        type: string
      "n":
        type: integer
      response_format:
        type: string
      size:
        type: string
    required:
    - image
    - model
    - "n"
    - response_format
    - size
    type: object
  interchange_internal_service_models.ListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/interchange_internal_service_models.Model'
        type: array
      object:
        description: '"list"'
        type: string
    type: object
  interchange_internal_service_models.Model:
    properties:
      created:
        description: unix seconds
        type: integer
      id:
        type: string
      object:
        description: '"model"'
        type: string
      owned_by:
        description: e.g. "openai" / "organization-owner"
        type: string
    type: object
  multipart.FileHeader:
    properties:
      filename:
        type: string
      header:
        $ref: '#/definitions/textproto.MIMEHeader'
      size:
        type: integer
    type: object
  textproto.MIMEHeader:
    additionalProperties:
      items:
        type: string
      type: array
    type: object
host: localhost:3000
info:
  contact: {}
  description: 這是後端 API 文件
  title: interchange API
  version: "1.0"
paths:
  /admin/users:
    get:
      parameters:
      - description: 頁碼
        in: query
        name: page
        type: integer
      - description: 每頁筆數
        in: query
        name: size
        type: integer
      - description: 角色
        in: query
        name: role
        type: string
      - description: 狀態
        in: query
        name: status
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/interchange_internal_dto.UserResponseDto'
            type: array
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得用戶列表
      tags:
      - Admin-User
    post:
      consumes:
      - application/json
      parameters:
      - description: 用戶資訊
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.CreateUserDto'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/interchange_internal_dto.UserResponseDto'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 新增用戶
      tags:
      - Admin-User
  /admin/users/{userID}:
    delete:
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 刪除用戶
      tags:
      - Admin-User
    get:
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/interchange_internal_dto.UserResponseDto'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得單一用戶資訊
      tags:
      - Admin-User
    put:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: 用戶更新資訊
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.UpdateUserDto'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 更新用戶
      tags:
      - Admin-User
  /admin/users/{userID}/api-keys:
    get:
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/interchange_internal_dto.UserAPIKeyResponseDto'
            type: array
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得用戶的 API Key 列表
      tags:
      - Admin-APIKey
    post:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: API Key 資訊
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.CreateUserAPIKeyDto'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/interchange_internal_dto.UserAPIKeyResponseDto'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 為指定用戶新增 API Key
      tags:
      - Admin-APIKey
  /admin/users/{userID}/api-keys/{apiKeyID}:
    delete:
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: API Key ID
        in: path
        name: apiKeyID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 刪除 API Key
      tags:
      - Admin-APIKey
    get:
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: API Key ID
        in: path
        name: apiKeyID
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/interchange_internal_dto.UserAPIKeyResponseDto'
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "404":
          description: Not Found
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 取得單一 API Key
      tags:
      - Admin-APIKey
    put:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: API Key ID
        in: path
        name: apiKeyID
        required: true
        type: string
      - description: provider_access
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.UpdateProviderAccessAllDto'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 全量覆蓋 provider_access 欄位
      tags:
      - Admin-APIKey
  /admin/users/{userID}/api-keys/{apiKeyID}/provider/{provider}:
    patch:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: API Key ID
        in: path
        name: apiKeyID
        required: true
        type: string
      - description: Provider
        in: path
        name: provider
        required: true
        type: string
      - description: 要更新的欄位map
        in: body
        name: body
        required: true
        schema:
          type: object
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 局部更新 provider 欄位
      tags:
      - Admin-APIKey
  /admin/users/{userID}/role:
    patch:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: 角色資訊
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.UpdateUserRoleDto'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 更新用戶角色
      tags:
      - Admin-User
  /admin/users/{userID}/status:
    patch:
      consumes:
      - application/json
      parameters:
      - description: User ID
        in: path
        name: userID
        required: true
        type: string
      - description: 狀態資訊
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_dto.UpdateUserStatusDto'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            additionalProperties:
              type: string
            type: object
        "400":
          description: Bad Request
          schema:
            additionalProperties:
              type: string
            type: object
        "500":
          description: Internal Server Error
          schema:
            additionalProperties:
              type: string
            type: object
      security:
      - BearerAuth: []
      summary: 更新用戶狀態
      tags:
      - Admin-User
  /mcp-server/{version}/{provider}/{action}:
    delete:
      consumes:
      - '*/*'
      description: 將上游請求（method / path / query / headers / body）原樣轉傳到指定 provider 的
        API，並把下游的狀態碼、標頭、內容原樣回傳。支援 JSON 與 SSE（text/event-stream）。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 欲轉傳之相對路徑（萬用字元，例：/chat/completions）
        in: path
        name: action
        required: true
        type: string
      produces:
      - application/json
      - text/event-stream
      responses:
        "200":
          description: 下游原始回應（或 SSE 串流）
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: MCP 透明轉傳
      tags:
      - MCP-Server
    get:
      consumes:
      - '*/*'
      description: 將上游請求（method / path / query / headers / body）原樣轉傳到指定 provider 的
        API，並把下游的狀態碼、標頭、內容原樣回傳。支援 JSON 與 SSE（text/event-stream）。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 欲轉傳之相對路徑（萬用字元，例：/chat/completions）
        in: path
        name: action
        required: true
        type: string
      produces:
      - application/json
      - text/event-stream
      responses:
        "200":
          description: 下游原始回應（或 SSE 串流）
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: MCP 透明轉傳
      tags:
      - MCP-Server
    patch:
      consumes:
      - '*/*'
      description: 將上游請求（method / path / query / headers / body）原樣轉傳到指定 provider 的
        API，並把下游的狀態碼、標頭、內容原樣回傳。支援 JSON 與 SSE（text/event-stream）。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 欲轉傳之相對路徑（萬用字元，例：/chat/completions）
        in: path
        name: action
        required: true
        type: string
      produces:
      - application/json
      - text/event-stream
      responses:
        "200":
          description: 下游原始回應（或 SSE 串流）
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: MCP 透明轉傳
      tags:
      - MCP-Server
    post:
      consumes:
      - '*/*'
      description: 將上游請求（method / path / query / headers / body）原樣轉傳到指定 provider 的
        API，並把下游的狀態碼、標頭、內容原樣回傳。支援 JSON 與 SSE（text/event-stream）。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 欲轉傳之相對路徑（萬用字元，例：/chat/completions）
        in: path
        name: action
        required: true
        type: string
      produces:
      - application/json
      - text/event-stream
      responses:
        "200":
          description: 下游原始回應（或 SSE 串流）
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: MCP 透明轉傳
      tags:
      - MCP-Server
    put:
      consumes:
      - '*/*'
      description: 將上游請求（method / path / query / headers / body）原樣轉傳到指定 provider 的
        API，並把下游的狀態碼、標頭、內容原樣回傳。支援 JSON 與 SSE（text/event-stream）。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 欲轉傳之相對路徑（萬用字元，例：/chat/completions）
        in: path
        name: action
        required: true
        type: string
      produces:
      - application/json
      - text/event-stream
      responses:
        "200":
          description: 下游原始回應（或 SSE 串流）
          schema:
            type: string
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: MCP 透明轉傳
      tags:
      - MCP-Server
  /proxy/{version}/{provider}/audio/speech:
    post:
      consumes:
      - application/json
      - multipart/form-data
      description: 將文字透過指定 provider 的語音模型轉為音訊檔，回傳 `audio/*` 位元流。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        in: path
        name: provider
        required: true
        type: string
      - description: 語音合成請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_audio.AudioSpeechRequestBody'
      produces:
      - audio/*
      - application/octet-stream
      responses:
        "200":
          description: 音訊位元流（Content-Type 依實際模型回傳，例如 audio/mpeg、audio/wav）
          schema: {}
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 語音合成（Text-to-Speech）
      tags:
      - Proxy-Audio
  /proxy/{version}/{provider}/audio/transcriptions:
    post:
      consumes:
      - multipart/form-data
      description: 上傳音訊檔轉為文字（支援常見格式，如 OGG/MP3/WAV 等），回傳文字結果。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        - gemini
        in: path
        name: provider
        required: true
        type: string
      - description: 轉錄請求內容（含檔案與參數）
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_audio.AudioTranscriptionRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: 轉錄文字內容
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  type: string
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 語音轉錄（Speech-to-Text）
      tags:
      - Proxy-Audio
  /proxy/{version}/{provider}/audio/translations:
    post:
      consumes:
      - multipart/form-data
      description: 上傳音訊檔並翻譯為指定語言的文字，回傳翻譯結果。
      parameters:
      - description: API 版本
        enum:
        - v1
        in: path
        name: version
        required: true
        type: string
      - description: 提供者
        enum:
        - openai
        - gemini
        in: path
        name: provider
        required: true
        type: string
      - description: 翻譯請求內容（含檔案與參數）
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_audio.AudioTranslationRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: 翻譯後文字內容
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  type: string
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "429":
          description: Too Many Requests
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 語音翻譯（Speech Translation）
      tags:
      - Proxy-Audio
  /proxy/{version}/{provider}/chat/completions:
    post:
      consumes:
      - application/json
      description: 處理聊天生成請求
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、azure、gemini）
        in: path
        name: provider
        required: true
        type: string
      - description: 聊天生成請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_chat.ChatPayload'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_chat.ChatResult'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 聊天生成
      tags:
      - Proxy-Chat
  /proxy/{version}/{provider}/embeddings/generations:
    post:
      consumes:
      - application/json
      description: 處理嵌入生成請求
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、azure、gemini）
        in: path
        name: provider
        required: true
        type: string
      - description: 嵌入生成請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_embedding.EmbeddingRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_embedding.EmbeddingResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 嵌入生成
      tags:
      - Proxy-Embedding
  /proxy/{version}/{provider}/images/edits:
    post:
      consumes:
      - application/json
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、azure、gemini）
        in: path
        name: provider
        required: true
        type: string
      - description: 圖片編輯請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_images.ImageEditRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_images.ImageGenerationResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 處理圖片編輯請求
      tags:
      - Proxy-Image
  /proxy/{version}/{provider}/images/generations:
    post:
      consumes:
      - application/json
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、azure、gemini）
        in: path
        name: provider
        required: true
        type: string
      - description: 圖片生成請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_images.ImageGenerationRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_images.ImageGenerationResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 處理圖片生成請求
      tags:
      - Proxy-Image
  /proxy/{version}/{provider}/images/variations:
    post:
      consumes:
      - application/json
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、azure、gemini）
        in: path
        name: provider
        required: true
        type: string
      - description: 圖片變體請求內容
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/interchange_internal_service_images.ImageVariantRequestBody'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_images.ImageGenerationResponse'
              type: object
      security:
      - ApiKeyAuth: []
      summary: 處理圖片變體請求
      tags:
      - Proxy-Image
  /proxy/{version}/{provider}/models:
    get:
      description: 依 provider 代理列出模型清單（回應維持 OpenAI 形狀）
      parameters:
      - description: API 版本（例如 v1、v2）
        in: path
        name: version
        required: true
        type: string
      - description: 模型提供者（例如 openai、gemini）
        in: path
        name: provider
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/interchange_internal_pkg_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/interchange_internal_service_models.ListResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/interchange_internal_pkg_error.Error'
      security:
      - ApiKeyAuth: []
      summary: 模型列表
      tags:
      - Proxy-Models
securityDefinitions:
  ApiKeyAuth:
    in: header
    name: X-API-Key
    type: apiKey
  BearerAuth:
    description: 請在欄位輸入 "Bearer {token}"
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
